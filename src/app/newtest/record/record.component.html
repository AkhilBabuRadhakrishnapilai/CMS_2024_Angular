<app-common-header></app-common-header>
<div class="container">
  <h2>PREVIOUS RECORDS</h2>

  <!-- Search bar -->
  <div class="input-group mb-3">
    <input type="search" class="form-control rounded-pill border-0 py-3" placeholder="Search tests..." [(ngModel)]="term" aria-label="Search tests" aria-describedby="search-addon">
    <div class="input-group-append">
      <button class="btn btn-primary rounded-pill py-3 px-4" type="button" id="search-addon">
        <i class="fas fa-search"></i> Search
      </button>
    </div>
  </div>

  <!-- Table to display live tests -->
  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th>Patient ID</th>
          <th>Patient Name</th>
          <th>Date of Birth</th>
          <th>Blood Group</th>
          <th>Doctor Name</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let patient of recordservice.patients | filter:term">
          <td>{{ patient.test.labtests.appointment.patient.id }}</td>
          <td>{{ patient.test.labtests.appointment.patient.name }}</td>
          <td>{{ patient.test.labtests.appointment.patient.dob }}</td>
          <td>{{ patient.test.labtests.appointment.patient.blood_group }}</td>
          <td>{{ patient.test.labtests.appointment.doctor.user_id.first_name }}</td>
          <td>
            <button class="btn btn-sm btn-primary" (click)="viewDetails(patient)">
              View Details
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Back button -->
  <div class="text-right mt-4">
    <a [routerLink]="['/shared/homelab']" role="button" class="btn btn-secondary">
      <i class="fa fa-arrow-left mr-2"></i> BACK
    </a>
  </div>
</div>
